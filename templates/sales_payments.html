{% extends "base.html" %}
{% block content %}

<h3 class="mb-3">Sales Receivables</h3>

<div class="table-responsive">
<table class="table table-striped table-sm align-middle">

<thead>
<tr>
<th>Date</th>
<th>Client</th>
<th class="text-end">Total Sale</th>
<th class="text-end">Received</th>
<th class="text-end">Balance</th>
<th>Status</th>
<th>Actions</th>
</tr>
</thead>

<tbody>

{% for sale in sales %}
<tr>

<td>{{ sale.date }}</td>

<td>{{ sale.client_name }}</td>

<td class="text-end fw-semibold">
₹ {{ "%.2f"|format(sale.total_amount()) }}
</td>

<td class="text-end text-success">
₹ {{ "%.2f"|format(sale.total_received()) }}
</td>

<td class="text-end text-danger">
₹ {{ "%.2f"|format(sale.balance_due()) }}
</td>

<td>
<span class="badge
{% if sale.payment_status() == 'Paid' %}
bg-success
{% elif sale.payment_status() == 'Partial' %}
bg-warning text-dark
{% else %}
bg-danger
{% endif %}
">
{{ sale.payment_status() }}
</span>
</td>

<td>

<a href="{{ url_for('add_sale_payment', sale_id=sale.id) }}"
   class="btn btn-sm btn-primary">
   Receive
</a>

<a href="{{ url_for('sale_payments_detail', sale_id=sale.id) }}"
   class="btn btn-sm btn-secondary">
   Details
</a>

</td>


</tr>

{% else %}
<tr>
<td colspan="7" class="text-center text-muted">
No sales found
</td>
</tr>
{% endfor %}

</tbody>

</table>
</div>

{% endblock %}
